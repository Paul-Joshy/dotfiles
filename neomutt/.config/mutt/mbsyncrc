# mbsync configuration for Gmail with OAuth2
# This file configures isync to sync Gmail to local storage

# Gmail account configuration
IMAPAccount gmail
Host imap.gmail.com
Port 993
User pauljoshyk96@gmail.com
PassCmd "oauth2.py"
AuthMechs OAuthBearer
SSLType IMAPS
SSLVersions TLSv1.2 TLSv1.3

# Local storage configuration
IMAPStore gmail-remote
Account gmail

# Local maildir storage
MaildirStore gmail-local
Path ~/.mail/gmail/
Inbox ~/.mail/gmail/INBOX
Subfolders Verbatim

# Channel configuration for different mailboxes
Channel gmail-inbox
Master :gmail-remote:"INBOX"
Slave :gmail-local:INBOX
Create Slave
Expunge Slave
SyncState *

Channel gmail-sent
Master :gmail-remote:"[Gmail]/Sent Mail"
Slave :gmail-local:Sent
Create Slave
Expunge Slave
SyncState *

Channel gmail-drafts
Master :gmail-remote:"[Gmail]/Drafts"
Slave :gmail-local:Drafts
Create Slave
Expunge Slave
SyncState *

Channel gmail-trash
Master :gmail-remote:"[Gmail]/Trash"
Slave :gmail-local:Trash
Create Slave
Expunge Slave
SyncState *

Channel gmail-spam
Master :gmail-remote:"[Gmail]/Spam"
Slave :gmail-local:Spam
Create Slave
Expunge Slave
SyncState *

# Group all channels together
Group gmail
Channel gmail-inbox
Channel gmail-sent
Channel gmail-drafts
Channel gmail-trash
Channel gmail-spam 